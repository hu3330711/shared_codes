# **************************************************************
#
#      ogs.cfg
#
#      Author: Winston Teitler.
#
# **************************************************************
#
#      Configuration file for the ogs procedures.
#
# **************************************************************
#
#      @(#)ogs.cfg	1.23    03/31/99    UCB SSL
#
# **************************************************************



# ==============================================================
# ==============================================================



# **************************************************************
#
#      This configuration file is "sourced" by the ogs C-shell
#      script procedures.
#
# **************************************************************



# **************************************************************
#
#      I  M  P  O  R  T  A  N  T  ! ! !
#      -------------------------
#
#      This configuration file is used by procedures that can
#      read it at any moment.
#
#      Make sure to change the contents of this file only via
#      the appropriate script; and then, very carefully.
#
# **************************************************************



# ==============================================================
# ==============================================================



# **************************************************************
#
#      Mail notification from ogs jobs.
#
# **************************************************************



#---------------------------------------------------------------
#
#      Mailing list for ogs job messages.
#
#      Should contain mail addresses.
#      Mail aliases can be used instead of addresses.
#
#      The first line must always be present, setting an empty
#      list.
#      Lines that follow may be added, modified, deleted, and
#      commented out.
#
#      If there are any addresses, mail is sent to all of them.
#      If there are no addresses, no mail is sent.
#
#---------------------------------------------------------------

   set mlist  = ( )

   set mlist  = ( $mlist  teq )



# ==============================================================
# ==============================================================



# **************************************************************
#
#      Information on receiving input files from Goddard.
#
# **************************************************************



#---------------------------------------------------------------
#
#      Directories for the input from Goddard.
#
#      These are local directories where the input from Goddard
#      arrives.
#
#      Should contain absolute paths, and not refer to any
#      workspace.
#
#      Directories are searched in the order below.
#
#---------------------------------------------------------------

   set goddin = ( )

   set goddin = ( $goddin  /fast_data/a/fdf )
   set goddin = ( $goddin  /fast_data/b/fdf )
   set goddin = ( $goddin  /fast_data/a/cms )



# ==============================================================
# ==============================================================



# **************************************************************
#
#      Information on sending output files for Goddard.
#
# **************************************************************



#---------------------------------------------------------------
#
#      This is the machine at CMS to which ftp our files.
#
#---------------------------------------------------------------

   set cms    = gatekeepera



# ==============================================================
# ==============================================================



# **************************************************************
#
#      Information on printing files.
#
# **************************************************************



#---------------------------------------------------------------
#
#      Command to print files.
#
#      Needs the printer destination and file name(s) to be
#      added.
#
#      The environment variable and path need to be set for the
#      command to work properly.
#
#---------------------------------------------------------------

   setenv OPENWINHOME /usr/openwin

   set path   = ( $path $OPENWINHOME/bin )

   set prtcmd = "filep -l"



#---------------------------------------------------------------
#
#      Printers to be used.
#
#      There are two default printers:
#       1) To print automatically (e.g., when sending the files
#          to Goddard).
#       2) To print on request (e.g., when editing the files).
#
#      These printers could be the same or different.
#
#      The procedure that prints could override the default.
#
#---------------------------------------------------------------

   set prtaut = spf3               # printer - automatically

   set prtreq = $prtaut            # printer - on request



# ==============================================================
# ==============================================================



# **************************************************************
#
#      Information on editing files.
#
# **************************************************************



#---------------------------------------------------------------
#
#      Commands to edit files.
#
#---------------------------------------------------------------

   set edcmds = ( )

   set edcmds = ( $edcmds  vi )



# ==============================================================
# ==============================================================



# **************************************************************
#
#      Information on ogs job run schedule, output dates/times,
#      and program arguments.
#
# **************************************************************



#---------------------------------------------------------------
#
#      Cutoff time for determination of first output date.
#
#      Consists of integer hours and integer minutes, UTC
#      (seconds for cutoff time are 0).
#
#      Hours must be  >= 0  and  <= 24 .
#      Minutes must be  >= 0  and  <= 59 .
#      If hours is 24, then minutes must be 0.
#
#      Leading zero is permitted but not required.
#
#---------------------------------------------------------------

   set cutofh = 06                 # cutoff time, hours
#   set cutofh = 04                 # campaign cutoff time, hours

   set cutofm = 00                 # cutoff time, minutes



#---------------------------------------------------------------
#
#      First output date.
#
#      This is the first date, UTC, for which output data files
#      are to be produced.
#
#      Determined as the current date, UTC, plus an offset in
#      days.
#
#      The offset depends on the time of day, UTC, when the job
#      started.
#
#      If the start time, UTC, for the job is before the cutoff
#      time, the first offset is used.
#
#      If the start time, UTC, for the job is at or after the
#      cutoff time, the second offset is used.
#
#      Note that if the cutoff time is 24:00, then the first
#      offset will be used for every job;
#      if the cutoff time is 00:00, then the second offset will
#      be used for every job;
#
#      Offsets must be integers, and must satifsfy
#          0 <= offst1 <= offst2 <= (offst1 + 1) .
#
#---------------------------------------------------------------

   set offst1 = 1                  # offset, before cutoff
#   set offst1 = 0                  # campaign offset, before cutoff

   set offst2 = 2                  # offset, at or after cutoff
#   set offst2 = 1                  # campaign offset, at or after cutoff



#---------------------------------------------------------------
#
#      Number of days for which output data files are to be
#      produced.
#
#      Number of days must be integer  >= 1 .
#
#---------------------------------------------------------------

   set ndayou = 3



#---------------------------------------------------------------
#
#      Start time desired for output data files.
#
#      Consists of integer hours, integer minutes, and integer
#      seconds, UTC.
#
#      Hours must be  >= 0  and  <= 23 .
#      Minutes must be  >= 0  and  <= 59 .
#      Seconds must be  >= 0  and  <= 59 .
#
#      Leading zero is permitted but not required.
#
#---------------------------------------------------------------

   set outsgh = 00                 # start genCommands, hours
#   set outsgh = 05                 # campaign start genCommands, hours

   set outsgm = 00                 # start genCommands, minutes

   set outsgs = 00                 # start genCommands, seconds


   set outssh = 00                 # start sunnadir, hours

   set outssm = 00                 # start sunnadir, minutes

   set outsss = 00                 # start sunnadir, seconds



#---------------------------------------------------------------
#
#      Extra time needed at the end of the orbit file for
#      genCommands and/or sunnadir (hours).
#
#      Number of hours must be integer  >= 0 .
#
#---------------------------------------------------------------

   set extrah = 15



#---------------------------------------------------------------
#
#      Arguments for orbgen, and related values:
#
#          - Computation interval (seconds).
#
#          - Output interval (seconds).
#
#          - Duration of output orbit data file, for "short run"
#            (seconds).
#            The purpose of the "short run" is to create a small
#            orbit data file, which is then used to determine
#            the start time of the orbit data, and to match
#            orbit numbers.
#
#          - Tolerance for matching of orbit numbers (seconds).
#
#      All the above must be integers  >= 1 .
#
#---------------------------------------------------------------

   set ocpint = 1                  # orbgen, comp interval

   set oouint = 10                 # orbgen, output interval

   set odursh = 10020              # orbgen, duration short run

   set tolmon = 20                 # tol, matching orbit numbers



# ==============================================================
# ==============================================================



# **************************************************************
#
#      Main local directories created by the ogs procedures.
#
# **************************************************************



#---------------------------------------------------------------
#
#      Root directories for the data in ogs procedures.
#
#      Should contain absolute paths, and not refer to any
#      workspace.
#
#      It is best if all these directories are subdirectories of
#      one higher directory set up for this purpose, and they
#      all are on the same file system.
#
#      All data created by the ogs procedures will go into these
#      directories and their subdirectories.
#
#      An exception are lock files to read and write this
#      configuration file, and to read and write the
#      configuration files used by the programs in the ogs
#      procedures.
#      These lock files go into the /tmp directory.
#
#      Normally, a user should not use directly the work
#      directory or any of its subdirectories.
#
#      Caution if ever changing a directory:
#      After having run jobs, there can be files left over, that
#      may be used in later jobs.
#
#---------------------------------------------------------------

#
#      Common higher level directory.
#
   set ogsoud = /fast_data/a/ogs

#
#      Work directory.
#
   set rdwork = $ogsoud/ogswork

#
#      Directory for files to be sent to Goddard.
#
   set rdsend = $ogsoud/ogssend

#
#      Directory for files to be archived.
#
   set rdarch = $ogsoud/ogsarch

#
#      Directory for orbit files.
#
   set rdorbs = $ogsoud/ogsorbs

#
#      Directory for files for the users.
#
   set rduser = $ogsoud/ogsuser



#---------------------------------------------------------------
#
#      Prefixes for subdirectory names for final products.
#
#---------------------------------------------------------------

#
#      Subdirectories for files to be sent to Goddard.
#
   set spsend = ogs.send

#
#      Subdirectories for files to be archived.
#
   set sparch = ogs.archive

#
#      Subdirectories for orbit files.
#
   set sporbs = ogs.orbit

#
#      Subdirectories for files for the users.
#
   set spuser = ogs.user



#---------------------------------------------------------------
#
#      Subdirectory for special user files.
#
#---------------------------------------------------------------

   set sduspc = ogs.user.special



# ==============================================================
# ==============================================================



# **************************************************************
#
#      Information on the types of input files from Goddard,
#      and regarding file names.
#
# **************************************************************



#---------------------------------------------------------------
#
#      Codes for the types of input files from Goddard.
#
#      It is assumed that the codes are all different, even
#      across file name types.
#
#      It is assumed also that a "wildcard" search of files
#      involving any code retrieves only file names genuinely
#      belonging to that code (i.e., the code does not come up
#      in other file names due to variable parts in prefixes or
#      suffixes to the codes of those file names).
#
#---------------------------------------------------------------

   set codatp = ATTPRE             # attitude prediction

   set codpov = EPVPRE             # predicted orbit vector

   set coddov = EPVDEF             # definitive orbit vector

   set codpop = ORBPRE             # predicted orbit precession

   set codasc = ACSCAL             # attitude sensor calibration

   set codipr = INTRPT             # integrated print report

   set codpwr = PWRRPT             # power report

   set codcsh = SMEXSS             # contact schedule


   set godcod = ( )

   set godcod = ( $godcod  $codatp )
   set godcod = ( $godcod  $codpov )
   set godcod = ( $godcod  $coddov )
   set godcod = ( $godcod  $codpop )
   set godcod = ( $godcod  $codasc )
   set godcod = ( $godcod  $codipr )
   set godcod = ( $godcod  $codpwr )
   set godcod = ( $godcod  $codcsh )



#---------------------------------------------------------------
#
#      Type 1 file names for the input from Goddard, except for
#      the file type codes.
#
#      Full name is  ${fnm1a}${fnm1b}${fnm1c}{CODE}.${fnm1d}
#      e.g.  F94345EPVPRE.00
#
#---------------------------------------------------------------

   set fnm1a  = "F"                # F (literal)

   set fnm1b  = "[0-9][0-9]"       # yy (year)

   set fnm1c  = "[0-9][0-9][0-9]"  # ddd (day)

   set fnm1d  = "[0-9][0-9]"       # nn (version)



#---------------------------------------------------------------
#
#      Type 2 file names for the input from Goddard, except for
#      the file type codes.
#
#      Full name used to be
#          {CODE}.${fnm2a}${fnm2b}_#${fnm2c}
#      e.g.  SMEXSS.W23_#7
#      then changed by Goddard to
#          {CODE}.${fnm2a}${fnm2b}.${fnm2c}
#      e.g.  SMEXSS.W23.7
#
#      and the file is collected as  SMEXSS.W23.7
#
#---------------------------------------------------------------

   set fnm2a  = "W"                # W (literal)

   set fnm2b  = "[0-9]*"           # w (week)

   set fnm2c  = "[0-9]*"           # v (version)



#---------------------------------------------------------------
#
#      Arrays of features for each file name type.
#
#      Must be changed very carefully to remain complete and
#      correct.
#
#      Note that it is assumed that the same word numbers for
#      a parsed file name are valid for a latest name as well.
#
#---------------------------------------------------------------

   set ntyp   = 2                  # number of file name types


   set fnprse = ( ogsprsg1 ogsprsg2 )    # name parsing program

   set fncmp  = ( ogscmpg1 ogscmpg2 )    # name compare program

   set fnlst  = ( ogslstg1 ogslstg2 )    # latest name program

   set fnbver = (       11        9 )    # parsed word Berk ver

   set fncode = (        5        2 )    # parsed word code

   set fndup  = (       13       10 )    # latest word dupl ind



#---------------------------------------------------------------
#
#      Features for file name type 1 only.
#
#---------------------------------------------------------------

   set fn1jdn = 12                 # parsed word JDN

   set fn1gvr = 10                 # parsed word Goddard version

   set fn1yy  =  3                 # parsed word yy

   set fn1ddd =  4                 # parsed word ddd



#---------------------------------------------------------------
#
#      Array of subscripts for the codes for the file types.
#
#---------------------------------------------------------------

   set ncod   = $#godcod           # number of codes


   set subcod = ( )
   set i      = 0

   while  ($i < $ncod)
       @ i++
       set subcod = ( $subcod $i )
     end



#---------------------------------------------------------------
#
#      Arrays of features for the codes for the file types.
#
#      Must be changed very carefully to remain complete and
#      correct.
#
#---------------------------------------------------------------

   set fnmtyp = ( $subcod )        # file name type

   set nlatus = ( $subcod )        # number of latest dates used


   foreach i ($subcod)

       if  ($godcod[$i] == $codatp)  then
           set fnmtyp[$i] = 1
           set nlatus[$i] = 1

         else  if  ($godcod[$i] == $codpov)  then
           set fnmtyp[$i] = 1
           set nlatus[$i] = 1

         else  if  ($godcod[$i] == $coddov)  then
           set fnmtyp[$i] = 1
           set nlatus[$i] = 0

         else  if  ($godcod[$i] == $codpop)  then
           set fnmtyp[$i] = 1
           set nlatus[$i] = 0

         else  if  ($godcod[$i] == $codasc)  then
           set fnmtyp[$i] = 1
           set nlatus[$i] = 0

         else  if  ($godcod[$i] == $codipr)  then
           set fnmtyp[$i] = 1
           set nlatus[$i] = 0

         else  if  ($godcod[$i] == $codpwr)  then
           set fnmtyp[$i] = 1
           set nlatus[$i] = 2

         else  if  ($godcod[$i] == $codcsh)  then
           set fnmtyp[$i] = 2
           set nlatus[$i] = 2

         else                      # error - set illegal values
           set fnmtyp[$i] = -1
           set nlatus[$i] = -1

         endif

     end



#---------------------------------------------------------------
#
#      Berkeley duplicate version number for the file name of
#      the first duplicate file.
#
#---------------------------------------------------------------

   set mfirst = 2



# ==============================================================
# ==============================================================



# **************************************************************
#
#      Information on the types of output files created.
#
# **************************************************************



#---------------------------------------------------------------
#
#      Output files with standard Goddard-type names.
#
#      All names are of type 1.
#
#      Codes for the types of output files.
#
#      It is assumed that the codes are all different from all
#      the codes for the input files from Goddard.
#
#      It is assumed also that a "wildcard" search of files
#      involving any code retrieves only file names genuinely
#      belonging to that code (i.e., the code does not come up
#      in other file names due to variable parts in prefixes or
#      suffixes to the codes of those file names).
#
#---------------------------------------------------------------



#---------------------------------------------------------------
#
#      Output files created by orbgen.
#
#---------------------------------------------------------------

   set cdorbt = ORBITP             # orbit file from pred vector


   set ofiles = ( )                # files created by orbgen

   set ofiles = ( $ofiles  $cdorbt )


   set ofsend = ( )                # files to be sent



#---------------------------------------------------------------
#
#      Output files created by genCommands.
#
#---------------------------------------------------------------

   set cdgnor = ATSNOR             # normal command file

   set cdgcar = ATSCARRY           # command carry file

   set cdgrem = ATSREMAINDER       # command remainder file

   set cdgrul = ATSRULES           # rules listings file

   set cdgsta = ATSSTATE           # day boundary state file


   set gfiles = ( )                # files cr by genCommands

   set gfiles = ( $gfiles  $cdgnor )
   set gfiles = ( $gfiles  $cdgcar )
   set gfiles = ( $gfiles  $cdgrem )
   set gfiles = ( $gfiles  $cdgrul )
   set gfiles = ( $gfiles  $cdgsta )


   set gfsend = ( )                # files to be sent

   set gfsend = ( $gfsend  $cdgnor )



#---------------------------------------------------------------
#
#      Output files created by sunnadir.
#
#---------------------------------------------------------------

   set cdspkt = SUNNAD             # packet file

   set cdsarc = SNARCH             # archive file

   set cdslog = SNLOGF             # log file


   set sfiles = ( )                # files created by sunnadir

   set sfiles = ( $sfiles  $cdspkt )
   set sfiles = ( $sfiles  $cdsarc )
   set sfiles = ( $sfiles  $cdslog )


   set sfsend = ( )                # files to be sent

   set sfsend = ( $sfsend  $cdspkt )



#---------------------------------------------------------------
#
#      Other output files.
#
#      These files do not have standard Goddard-type names.
#
#---------------------------------------------------------------

   set oldost = orbstart.old       # old file of orbit start tm

   set newost = orbstart           # new file of orbit start tm

   set orbfet = orbfend            # file of orbit file end time



# ==============================================================
# ==============================================================



# **************************************************************
#
#      Configuration files used by the ogs programs.
#
# **************************************************************



#---------------------------------------------------------------
#
#      Configuration (model B) file for orbgen.
#
#---------------------------------------------------------------

   set orbcd  = Fastorb            # default subdirectory

   set orbcf  = mag4wi.dat         # default file name



#---------------------------------------------------------------
#
#      Configuration (rules) files for genCommands.
#
#---------------------------------------------------------------

   set gencd  = ATSConfig          # default subdirectory

   set gencf  = ( )                # actual file names

   set gencf  = ( $gencf  ATSCmd.defs )
   set gencf  = ( $gencf  BiasCurrent.rules )
   set gencf  = ( $gencf  BurstTrig.rules )
   set gencf  = ( $gencf  CovRed.rules )
   set gencf  = ( $gencf  FastSlowSurv.rules )
   set gencf  = ( $gencf  InstMode.rules )
   set gencf  = ( $gencf  MassMem.rules )
   set gencf  = ( $gencf  Mode.info )



#---------------------------------------------------------------
#
#      Configuration file for sunnadir.
#
#---------------------------------------------------------------

   set suncd  = sunnadirDAT        # default subdirectory

   set suncf  = sunnadir.cfg       # default file name



# ==============================================================
# ==============================================================



# **************************************************************
#
#      Lock files available from this configuration file.
#
# **************************************************************



#---------------------------------------------------------------
#
#      Lock files (ogs jobs).
#
#      These files are to prevent two jobs from running
#      simultaneously.
#
#      A job lock file has as its name the prefix, followed by
#      the name of the procedure, followed by the process
#      number; with the parts separated by periods.
#
#---------------------------------------------------------------

   set lock   = ogslock            # prefix for lock files



# ==============================================================
# ==============================================================



# **************************************************************
#
#      Status files.
#
# **************************************************************



#---------------------------------------------------------------
#
#      CMS/FDF file log.
#
#---------------------------------------------------------------

   set cflg   = ogs.cfflog



#---------------------------------------------------------------
#
#      Process ID file (ogs jobs).
#
#---------------------------------------------------------------

   set prid   = ogs.prcsid



#---------------------------------------------------------------
#
#      Job ID file (ogs jobs).
#
#---------------------------------------------------------------

   set jbid   = ogs.jobid



#---------------------------------------------------------------
#
#      Job log file (ogs jobs).
#
#---------------------------------------------------------------

   set jblg   = ogs.joblog



# ==============================================================
# ==============================================================



# **************************************************************
#
#      Some local subdirectories created by the ogs procedures.
#
# **************************************************************



#---------------------------------------------------------------
#
#      Subdirectory of the work directory to collect the input
#      from Goddard.
#
#---------------------------------------------------------------

   set gdin   = ogs.godinp



#---------------------------------------------------------------
#
#      "Working" subdirectories for the copies of the input from
#      Goddard.
#
#      The first is a subdirectory of the directory designated
#      as output directory for the copies of the input from
#      Goddard;
#      the others are subdirectories of this first one.
#
#---------------------------------------------------------------

   set gdcp   = ogs.godcop         # base "working" subdirectory

   set gdnw   = ogs.godnwi         # new input files

   set gdlt   = ogs.godlat         # latest files
