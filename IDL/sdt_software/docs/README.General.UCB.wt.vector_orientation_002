************************************************************************

   README.General.UCB.wt.vector_orientation_002

   Author: Winston Teitler.

************************************************************************

   Documentation file for the SDT Science Module

       General.UCB.wt.vector_orientation_002

************************************************************************

   Vector orientation.

************************************************************************

   @(#)README.General.UCB.wt.vector_orientation_002	1.1    11/22/06    UCB SSL

************************************************************************





   Contents:



   1. Science Description.

   2. Usage Description.





------------------------------------------------------------------------





   1. Science Description.





    1) This Science Module finds times when the spacecraft position is
       close to any one of a list of specified positions.



       For representative times found, the orientations of 2 vectors are
       written to an output file.





    2) There must be the following SDT inputs:



        1) The position vector.


           The components of the position vector must be in GEI.



        2) The 1st. vector whose orientation is to be output.



        3) The 2nd. vector whose orientation is to be output.





    3) Each of the vectors whose orientation is to be output, must have
       its components in the coordinate system to which the orientation
       of the vector is to be referred; this Science Module does not
       perform any vector rotations from one coordinate system into
       another.



       The coordinate system for each of the vectors whose orientation
       is to be output; should be a non-rotating coordinate system
       (i.e., a coordinate system that does not participate of the
       rotation of the spacecraft).



       It is not required that the coordinate systems for the vectors
       whose orientation is to be output be all the same coordinate
       system; they can be different from one another (and they can be
       different than GEI).





    4) The input vector that gives the spacecraft position is referred
       to as R.



       The vectors whose orientation is to be output can be any vectors;
       here they are referred to as B (magnetic field) and S (Sun
       vector).





    5) There must be a list of chosen positions or "targets".





    6) The user can specify:


        1) A search time increment ("delta_t").


        2) A tolerance for distance from a target ("max_dist").


        3) A "wait time" for a target ("min_t_diff").



       The Science Module tries the following times (provided they are
       within the time interval being processed):

       0, delta_t, (2 * delta_t), (3 * delta_t), etc.



       For each of these times, the program determines the spacecraft
       position, and checks whether the S/C position is within a
       distance no greater than "max_dist" from any one of the targets.



       If the S/C position is close enough to a target, then the time is
       considered as a candidate to be output.

       The time will be output, unless the previous time that was output
       matched the same target, and the difference between the two times
       is less than "min_t_diff".





    7) For a value of the time to be considered, it must be in the time
       interval defined by two input data points for R.



       The position vector for the time being considered can be obtained
       by linear interpolation, or by replication.



       However, if the time interval between the two input data points
       is larger than a chosen value, this is considered to be a data
       dropout.





    8) For a value of the time to be considered, then for each of the
       vectors whose orientation is to be output; the time under
       consideration must be within a time interval defined by two input
       data points for that vector.



       For each of the vectors, the value of the vector for the time
       being considered can be obtained by linear interpolation, or by
       replication.



       However, if the time interval between the two input data points
       is larger than a chosen value, this is considered to be a data
       dropout.





    9) The only meaningful output is the file listing the vector
       orientations.



       No data points are written to the SDT output.

       The SDT output quantity is a dummy, formal SDT quantity.





   10) The user can choose whether an existing output file is to be
       appended to, or overwritten.





------------------------------------------------------------------------





   2. Usage Description.





    1) This Science Module can operate in Data Analysis mode only.





    2) There must be the following command-line arguments:



           None.





    3) There must be the following user parameters:



            1) Dump frequency for the output data points.


               Int.


               Must be one of the following:


                    0      =  Do not dump.

                    >= 1   =  Dump output data points with indices of:
                              0, n, 2n, 3n, ...  (where n is the chosen
                              dump frequency); i.e., every n-th point.

                    <= -1  =  Dump output data points with indices of:
                              0, 1, 2, 3, ..., (n-1)  (where -n is the
                              chosen dump frequency); i.e., the first n
                              points.



            2) Directory name for the input file.


               Char.


               This is the directory name with path.



            3) File name for the input file.


               Char.


               This is the file name only (no path).



            4) Directory name for the output file.


               Char.


               This is the directory name with path.



            5) File name for the output file.


               Char.


               This is the file name only (no path).



            6) Flag to append to the output file.


               Int.


               Must be one of the following:


                    WT_TRUE   =  Append.

                    WT_FALSE  =  Do not append (if file exists,
                                 overwrite).



            7) Tolerance for distance from a target ("max_dist").


               Double.


               Must be  >  0.



            8) Search time increment ("delta_t").


               Double.


               Units are seconds.


               Must be  >  0.



            9) "Wait time" for a target ("min_t_diff").


               Double.


               Units are seconds.


               Must be  >=  0.



           10) Units factor for the targets.


               Double.


               This is a factor which, when multiplied by the components
               of the position vector for a target, as obtained from the
               input list of targets; gives a position vector for the
               target with components in the same units of distance as
               are to be used in the output file listing.


               Must be  >  0.



           11) Units factor for the input R.


               Double.


               This is a factor which, when multiplied by the components
               of the input position vector R; gives a position vector
               with components in the same units of distance as are to
               be used in the output file listing.


               Must be  >  0.



           12) Units factor for the tolerance for distance from a
               target.


               Double.


               This is a factor which, when multiplied by "max_dist";
               gives a tolerance for distance in the same units of
               distance as are to be used in the output file listing.


               Must be  >  0.



           13) The group of parameters described here occurs once for
               each of the following: R, and each of the vectors whose
               orientation is to be output.



                1) Dropout time.


                   Double.


                   Units are seconds.


                   Must be  >  0.



                2) Flag to interpolate.


                   Int.


                   Must be one of the following:


                        WT_TRUE   =  Interpolate.

                        WT_FALSE  =  Do not interpolate (replicate).



                3) The group of parameters described here occurs once
                   for each of the 3 input vector components.


                    1) Input component index.


                       Int.





    4) The following input data files are used:



            1) The list of target positions.


               This is an ASCII, plain text file.


               Lines  whose first non-white-space character is '#' are
               considered comment lines.


               Each data line must contain the following fields,
               separated from each other by white space:


                1) Distance from the center of the Earth.


                2) Geographic latitude (degrees).


                3) Geographic longitude (degrees).





    5) There must be the following SDT input data quantities:



            1) The position vector R.


               This input consists of a time series (Standard data
               type); the following components are required, and must be
               of the indicated types:


                1) Time.

                   Double.

                   Must be component 0.


                2) Additional components for the 3 vector components.

                   Float.



            2) The vectors whose orientation is to be output.


               Each if these inputs consists of a time series (Standard
               data type); the following components are required, and
               must be of the indicated types:


                1) Time.

                   Double.

                   Must be component 0.


                2) Additional components for the 3 vector components.

                   Float.





    6) The SDT output data quantity is a time series (Standard data
       type), and consists of the following components:



            1) Time.


               Double.



            2) Value.


               Float.





    7) The following output data files are written:



            1) The list of vector orientations for the times found.


               This is an ASCII, plain text file.


               Each data line contains the following fields,
               separated from each other by white space:



                1) Date (YYYY/MM/DD).


                2) Time (HH:MM:SS).


                3) Distance from the center of the Earth.


                4) Geographic latitude (degrees).


                5) Geographic longitude (degrees).


                6) For each of the vectors, its 3 direction angles
                   (degrees).


                7) Index of the target that this time matched (the 1st.
                   target has index 1).
